<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta name="robots" content="noindex,noarchive">
<title>Qt Toolkit - QCache Class</title><style type="text/css"><!--
h3.fn,span.fn { margin-left: 15%; text-indent: -15%; }
a:link { text-decoration: none; }
--></style>
</head><body bgcolor="#ffffff">

<a href=index.html><img width=122 height=65 src=qtlogo.jpg alt="Qt logo" align=left border=0></a>
<center><img src=dochead.gif width=472 height=27></center>
<br clear=all>

<h1 align=center>QCache Class Reference</h1><br clear="all">
<p>
The QCache class is a template class that provides a cache based on <code>char*</code> keys.
<a href="#details">More...</a>
<p>
<code>#include &lt;<a href="qcache-h.html">qcache.h</a>&gt;</code>
<p>
Inherits <a href="qgcache.html">QGCache</a>.
<p><a href="qcache-members.html">List of all member functions.</a>
<h2>Public Members</h2>
<ul>
<li><span class="fn"><a href="qcache.html#a0"><strong>QCache</strong></a> ( const QCache&lt;type&gt; &amp; c ) </span>
<li><span class="fn"><a href="qcache.html#a1"><strong>QCache</strong></a> ( int maxCost=100, int size=17, bool cs=TRUE, bool ck=TRUE ) </span>
<li><span class="fn"><a href="qcache.html#a2"><strong>~QCache</strong></a> () </span>
<li><span class="fn">QCache&lt;type&gt;&amp; <a href="qcache.html#a3"><strong>operator=</strong></a> ( const QCache&lt;type&gt; &amp; c ) </span>
<li><span class="fn">int <a href="qcache.html#a4"><strong>maxCost</strong></a> () const</span>
<li><span class="fn">int <a href="qcache.html#a5"><strong>totalCost</strong></a> () const</span>
<li><span class="fn">void <a href="qcache.html#a6"><strong>setMaxCost</strong></a> ( int m ) </span>
<li><span class="fn">virtual uint <a href="qcache.html#a7"><strong>count</strong></a> () const</span>
<li><span class="fn">uint <a href="qcache.html#a8"><strong>size</strong></a> () const</span>
<li><span class="fn">bool <a href="qcache.html#a9"><strong>isEmpty</strong></a> () const</span>
<li><span class="fn">bool <a href="qcache.html#b0"><strong>insert</strong></a> ( const char * k, const type * d, int c=1, int p=0 ) </span>
<li><span class="fn">bool <a href="qcache.html#b1"><strong>remove</strong></a> ( const char * k ) </span>
<li><span class="fn">type* <a href="qcache.html#b2"><strong>take</strong></a> ( const char * k ) </span>
<li><span class="fn">virtual void <a href="qcache.html#b3"><strong>clear</strong></a> () </span>
<li><span class="fn">type* <a href="qcache.html#b4"><strong>find</strong></a> ( const char * k, bool ref=TRUE ) const</span>
<li><span class="fn">type* <a href="qcache.html#b5"><strong>operator[]</strong></a> ( const char * k ) const</span>
<li><span class="fn">void <a href="qgcache.html#b4"><strong>statistics</strong></a> () const</span>
</ul>
<hr><h2><a name="details"></a>Detailed Description</h2>
The QCache class is a template class that provides a cache based on <code>char*</code> keys.
<p>
QCache is implemented as both a template and a macro class. Define a
template instance QCache&lt;X&gt; to create a cache that operates on
pointers to X, or X*.
<p>A cache is a least recently used (LRU) list of cache items.  Each
cache item has a cost.  The sum of item costs, <a href="qcache.html#a5">totalCost</a>(), will not
exceed the maximum cache cost, <a href="qcache.html#a4">maxCost</a>().  If inserting a new item
would cause the total cost to exceed the maximum cost, the least
recently used items in the cache are deleted.
<p>Apart from insert, by far the most important function is <a href="qcache.html#b4">find</a>()
(which also exists as operatior[]).  This function looks up an item,
returns it, and by default marks it as being the least recently used
item.
<p>There are also methods to <a href="qcache.html#b1">remove</a>() an object from the cache and
delete it, and to <a href="qcache.html#b2">take</a>() an object out of the cache without deleting
it.
<p>The keys for the cache can be case-sensitive or not, or deeply
copied or not.  The constructor lets you decide.
<p>QCache, as it must, takes over ownership of the items you insert.
That implies that it will delete the items at its discretion, and
that you must <em>not</em> delete them.  There is one exception, however:
If the cost of an object you try to <a href="qcache.html#b0">insert</a>() is higher than the
allowed total cost of the cache, insert() returns FALSE and in this
case you must delete the object yourself.
<p>In addition to totalCost() and maxCost()/<a href="qcache.html#a6">setMaxCost</a>(), there are
access functions to obtain the number of items in the cache
(<a href="qcache.html#a7">count</a>()), the size of the hash array (<a href="qcache.html#a8">size</a>(), set using the
constructor) and whether the cache is empty (you guessed it:
<a href="qcache.html#a9">isEmpty</a>()).  Finally, there is a <a href="qgcache.html#b4">statistics</a>(), which prints various
cache statistics on <code>stdout.</code>
<p>There is also a <a href="qcacheiterator.html">QCacheIterator</a> which may be used to traverse the
items in the cache in arbritrary order.
<p>See also:  <a href="qcacheiterator.html">QCacheIterator</a>, <a href="qintcache.html">QIntCache</a> and <a href="collection.html">Collection Classes</a>

<hr><h2>Member Function Documentation</h2>
<h3 class="fn"><a name="a0"></a>QCache::QCache ( const QCache&lt;type&gt; &amp; c )</h3>
<p>For internal use only.
<h3 class="fn"><a name="a1"></a>QCache::QCache ( int maxCost=100, int size=17, bool cs=TRUE, bool ck=TRUE )</h3>
<p>Constructs an empty cache with maximum allowed total cost <em>maxCost,</em> optimized to contain a bit less than <em>size</em> items, with
case-sensitive keys if <em>cs</em> is TRUE (the default) and
case-insensitive keys if <em>cs</em> is FALSE, and whose keys are deeply
copied on insertion (the default) and shallowly copied of <em>ck</em> is
FALSE.
<h3 class="fn"><a name="a2"></a>QCache::~QCache ()</h3>
<p>Destroys the object and all objects in it.
<h3 class="fn">void <a name="b3"></a>QCache::clear () <code>[virtual]</code></h3>
<p>Removes all items from the cache, and deletes them.
<p>All cache iterators that operate this on cache are reset.
<p>See also:  <a href="qcache.html#b1">remove</a>() and <a href="qcache.html#b2">take</a>().
<p>Reimplemented from <a href="qcollection.html#a3">QCollection.</a>
<h3 class="fn">uint <a name="a7"></a>QCache::count () const <code>[virtual]</code></h3>
<p>Returns the number of items in the cache.
<p>See also:  <a href="qcache.html#a5">totalCost</a>().
<p>Reimplemented from <a href="qcollection.html#a2">QCollection.</a>
<h3 class="fn">type * <a name="b4"></a>QCache::find ( const char * k, bool ref=TRUE ) const</h3>
<p>Returns the item associated with \ k, or null if the key does not
exist in the cache.  If <em>ref</em> is TRUE (the default), the item is
moved to the front of the LRU list.
<p>If there are two or more items with equal keys, then the one that
was inserted last is returned.
<h3 class="fn">bool <a name="b0"></a>QCache::insert ( const char * k, const type * d, int c=1, int p=0 )</h3>
<p>Inserts the item <em>d</em> into the cache with key <em>k,</em> cost <code>and</code>
priority <em>p,</em> and returns TRUE if it is successful and FALSE if it
fails.
<p>The cache's size is limited, and if the total cost is too high,
QCache will delete some of the least-used objects.<p><strong>Warning:</strong> If this function returns FALSE, you must delete <em>d</em>
yourself.  Additionally, be very careful about using <em>d</em> after
calling this function, as any other insertions into the cache, from
anywhere in the application, or within Qt itself, could cause the
object to be discarded from the cache, and the pointer to become
invalid.
<h3 class="fn">bool <a name="a9"></a>QCache::isEmpty () const</h3>
<p>Returns TRUE if the cache is empty, or TRUE if there is at least one
object in it.
<h3 class="fn">int <a name="a4"></a>QCache::maxCost () const</h3>
<p>Returns the maximum allowed total cost of the cache.
<p>See also:  <a href="qcache.html#a6">setMaxCost</a>() and <a href="qcache.html#a5">totalCost</a>().
<h3 class="fn">QCache&lt;type&gt;&amp; <a name="a3"></a>QCache::operator= ( const QCache&lt;type&gt; &amp; c )</h3>
<p>For internal use only.
<h3 class="fn">type * <a name="b5"></a>QCache::operator[] ( const char * k ) const</h3>
<p>Returns the item associated with <em>k,</em> or null if <em>k</em> does not
exist in the cache, and moves the item to the front of the LRU list.
<p>If there are two or more items with equal keys, then the one that
was inserted last is returned.
<p>This is the same as <a href="qcache.html#b4">find</a>( k, TRUE ).
<p>See also:  <a href="qcache.html#b4">find</a>().
<h3 class="fn">bool <a name="b1"></a>QCache::remove ( const char * k )</h3>
<p>Deletes the item associated with <em>k,</em> and returns TRUE if the item
was present in the cache or FALSE if it was not.
<p>If there are two or more items with equal keys, then the one that
was inserted last is is deleted.
<p>All iterators that refer to the removed item are set to point to the
next item in the cache's traversal order.
<p>See also:  <a href="qcache.html#b2">take</a>() and <a href="qcache.html#b3">clear</a>().
<h3 class="fn">void <a name="a6"></a>QCache::setMaxCost ( int m )</h3>
<p>Sets the maximum allowed total cost of the cache to <em>m.</em>  If the
current total cost is above <em>m,</em> some items are deleted
immediately.
<p>See also:  <a href="qcache.html#a4">maxCost</a>() and <a href="qcache.html#a5">totalCost</a>().
<h3 class="fn">uint <a name="a8"></a>QCache::size () const</h3>
<p>Returns the size of the hash array used to implement the cache.
This should be a bit bigger than <a href="qcache.html#a7">count</a>() is likely to be.
<h3 class="fn">type * <a name="b2"></a>QCache::take ( const char * k )</h3>
<p>Takes the item associated with <em>k</em> out of the cache without
deleting it, and returns a pointer to the item taken out, or null if
the key does not exist in the cache.
<p>If there are two or more items with equal keys, then the one that
was inserted last is taken.
<p>All iterators that refer to the taken item are set to point to the
next item in the cache's traversal order.
<p>See also:  <a href="qcache.html#b1">remove</a>() and <a href="qcache.html#b3">clear</a>().
<h3 class="fn">int <a name="a5"></a>QCache::totalCost () const</h3>
<p>Returns the total cost of the items in the cache.  This is an
integer in the range 0 to <a href="qcache.html#a4">maxCost</a>().
<p>See also:  <a href="qcache.html#a6">setMaxCost</a>().
<hr><p>
Search the documentation, FAQ, qt-interest archive and more (uses 
<a href="http://www.troll.no">www.troll.no</a>):<br>
<form method=post action="http://www.troll.no/search.cgi">
<input type=hidden name="version" value="1.44"><nobr>
<input size="50" name="search"><input type=submit value="Search">
</nobr></form><hr><p>
This file is part of the <a href="index.html">Qt toolkit</a>,
copyright &copy; 1995-99
<a href="troll.html">Troll Tech</a>, all rights reserved.
<p>
It was generated from the following files:
<ul>
<li>qcache.h: 1998/08/27
<li>qcache.doc: 1998/07/03
</ul>
<p><address><hr><div align="center">
<table width="100%" cellspacing="0" border="0"><tr>
<td>Copyright © 1999 Troll Tech<td><a href="trademarks.html">Trademarks</a>
<td align="right"><div align="right">Qt version 1.45</div>
</table></div></address></body></html>
